# ComfyUI Batch Configuration - Sampler/Scheduler Starter Test
# A manageable first test with proven good combinations

workflow_file: ../workflow.json
sampling_strategy: grid
num_samples: 100  # Ignored for grid
seeds_per_sample: 2  # 2 seeds per combo for consistency check

parameters:
  # Test 4 popular samplers with 3 proven schedulers
  # = 4 × 3 × 2 seeds = 24 videos (very manageable)

  sampler_name:
    path: nodes.57.inputs.sampler_name
    type: values
    values:
      - "euler"           # Baseline, stable
      - "euler_a"         # Ancestral (more creative)
      - "dpmpp_2m"        # Popular, high quality
      - "dpmpp_2m_sde"    # SDE variant, good detail

  scheduler:
    path: nodes.57.inputs.scheduler
    type: values
    values:
      - "normal"          # Standard schedule
      - "karras"          # Often improves quality
      - "exponential"     # Good for detail preservation

  # Mirror settings for low-noise model (node 58)
  sampler_name_node58:
    path: nodes.58.inputs.sampler_name
    type: values
    values: ["euler", "euler_a", "dpmpp_2m", "dpmpp_2m_sde"]

  scheduler_node58:
    path: nodes.58.inputs.scheduler
    type: values
    values: ["normal", "karras", "exponential"]

  # Fixed optimal parameters
  sampling_shift:
    path: nodes.54.inputs.shift
    type: values
    values: [5]

  sampling_shift_node55:
    path: nodes.55.inputs.shift
    type: values
    values: [5]

  sampler_steps:
    path: nodes.57.inputs.steps
    type: values
    values: [4]

  sampler_steps_node58:
    path: nodes.58.inputs.steps
    type: values
    values: [4]

  sampler_cfg:
    path: nodes.57.inputs.cfg
    type: values
    values: [1]

  sampler_cfg_node58:
    path: nodes.58.inputs.cfg
    type: values
    values: [1]

  sampler_start_at_step:
    path: nodes.57.inputs.start_at_step
    type: values
    values: [0]

  sampler_end_at_step:
    path: nodes.57.inputs.end_at_step
    type: values
    values: [2]

  sampler_start_at_step_node58:
    path: nodes.58.inputs.start_at_step
    type: values
    values: [2]

  sampler_end_at_step_node58:
    path: nodes.58.inputs.end_at_step
    type: values
    values: [10000]

  video_fps:
    path: nodes.60.inputs.fps
    type: values
    values: [24]

  wanfirstlastframetovideo_width:
    path: nodes.67.inputs.width
    type: values
    values: [1280]

  wanfirstlastframetovideo_height:
    path: nodes.67.inputs.height
    type: values
    values: [720]

  wanfirstlastframetovideo_length:
    path: nodes.67.inputs.length
    type: values
    values: [121]

  wanfirstlastframetovideo_batch_size:
    path: nodes.67.inputs.batch_size
    type: values
    values: [1]

  lora_strength_model:
    path: nodes.91.inputs.strength_model
    type: values
    values: [2.0]

  lora_strength_model_node92:
    path: nodes.92.inputs.strength_model
    type: values
    values: [2.0]

  sampler_noise_seed:
    path: nodes.57.inputs.noise_seed
    type: random_seed

  sampler_noise_seed_node58:
    path: nodes.58.inputs.noise_seed
    type: random_seed

output:
  base_dir: output
  run_name_pattern: '{run_id:04d}_s{sampler_name}_sch{scheduler}'
  save_params_json: true
  save_metadata_csv: true

resume:
  enabled: true
  skip_existing: true

comfyui:
  server_address: 127.0.0.1:8188
  poll_interval: 2
